# 02 - Sistem Mimarisi

## ğŸ—ï¸ Ãœst DÃ¼zey Mimari

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Ä°NTERNET                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                               â”‚                               â”‚
        â–¼                               â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DOMIZAN       â”‚               â”‚ GOOGLE        â”‚               â”‚ TELEGRAM      â”‚
â”‚ BACKEND       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ GEMINI API    â”‚               â”‚ API           â”‚
â”‚               â”‚               â”‚               â”‚               â”‚               â”‚
â”‚ api.domizan.  â”‚               â”‚ generativelangâ”‚               â”‚ api.telegram. â”‚
â”‚ com           â”‚               â”‚ uage.google   â”‚               â”‚ org           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                                               â”‚
        â”‚ HTTPS                                                         â”‚
        â”‚                                                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           OFÄ°S AÄI (LAN)                                      â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                    DOMIZAN DESKTOP (Ana PC)                          â”‚    â”‚
â”‚   â”‚                                                                      â”‚    â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚    â”‚
â”‚   â”‚  â”‚ InboxWatcher â”‚  â”‚ DocumentFlow â”‚  â”‚ FileRouter   â”‚               â”‚    â”‚
â”‚   â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚               â”‚    â”‚
â”‚   â”‚  â”‚ â€¢ chokidar   â”‚â”€â”€â”‚ â€¢ AI Bridge  â”‚â”€â”€â”‚ â€¢ KlasÃ¶r     â”‚               â”‚    â”‚
â”‚   â”‚  â”‚ â€¢ queue      â”‚  â”‚ â€¢ Matcher    â”‚  â”‚ â€¢ Log        â”‚               â”‚    â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚
â”‚   â”‚         â”‚                 â”‚                 â”‚                        â”‚    â”‚
â”‚   â”‚         â–¼                 â–¼                 â–¼                        â”‚    â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚   â”‚  â”‚                    ELECTRON IPC                               â”‚   â”‚    â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚   â”‚         â”‚                 â”‚                 â”‚                        â”‚    â”‚
â”‚   â”‚         â–¼                 â–¼                 â–¼                        â”‚    â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚   â”‚  â”‚               REACT RENDERER (UI)                             â”‚   â”‚    â”‚
â”‚   â”‚  â”‚  â€¢ Popup (doÄŸrulama)                                          â”‚   â”‚    â”‚
â”‚   â”‚  â”‚  â€¢ Dashboard                                                   â”‚   â”‚    â”‚
â”‚   â”‚  â”‚  â€¢ Ayarlar                                                     â”‚   â”‚    â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                          â”‚
â”‚                                    â”‚ File System                              â”‚
â”‚                                    â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                    PAYLAÅIMLI KLASÃ–R                                 â”‚    â”‚
â”‚   â”‚               \\server\GelenKutusu (SMB Share)                       â”‚    â”‚
â”‚   â”‚                                                                      â”‚    â”‚
â”‚   â”‚   EriÅŸim: PC1 (AyÅŸe), PC2 (Mehmet), PC3 (Zeynep)                    â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© BileÅŸen DetaylarÄ±

### 1. Desktop App (Electron)

```
packages/desktop/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/                    # Main Process (Node.js)
â”‚   â”‚   â”œâ”€â”€ main.js              # Entry point
â”‚   â”‚   â”œâ”€â”€ inbox-watcher.js     # Dosya izleme
â”‚   â”‚   â”œâ”€â”€ document-flow.js     # Ana orchestrator
â”‚   â”‚   â”œâ”€â”€ backend-client.js    # Backend API istemcisi [YENÄ°]
â”‚   â”‚   â”œâ”€â”€ mukellef-matcher.js  # MÃ¼kellef eÅŸleÅŸtirme
â”‚   â”‚   â”œâ”€â”€ file-router.js       # Dosya taÅŸÄ±ma
â”‚   â”‚   â”œâ”€â”€ offline-queue.js     # Offline kuyruk [YENÄ°]
â”‚   â”‚   â””â”€â”€ learning-cache.js    # Lokal pattern cache [YENÄ°]
â”‚   â”‚
â”‚   â””â”€â”€ renderer-new/            # Renderer Process (React)
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ DocumentPopup/   # KapsamlÄ± doÄŸrulama popup [YENÄ°]
â”‚       â”‚   â”œâ”€â”€ Dashboard/
â”‚       â”‚   â””â”€â”€ Settings/
â”‚       â””â”€â”€ services/
â”‚           â””â”€â”€ ipc.ts           # IPC bridge
```

### 2. Backend (Domizan API)

```
backend/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ v1/
â”‚   â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”‚   â””â”€â”€ analyze.js       # AI proxy endpoint
â”‚   â”‚   â”œâ”€â”€ usage/
â”‚   â”‚   â”‚   â”œâ”€â”€ track.js         # Token kaydÄ±
â”‚   â”‚   â”‚   â””â”€â”€ report.js        # KullanÄ±m raporu
â”‚   â”‚   â”œâ”€â”€ learning/
â”‚   â”‚   â”‚   â”œâ”€â”€ correction.js    # DÃ¼zeltme kayÄ±t
â”‚   â”‚   â”‚   â””â”€â”€ patterns.js      # Pattern daÄŸÄ±tÄ±m
â”‚   â”‚   â””â”€â”€ telegram/
â”‚   â”‚       â””â”€â”€ webhook.js       # Telegram bot
â”‚   â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ gemini-client.js         # Gemini API wrapper
â”‚   â”œâ”€â”€ token-counter.js         # Token hesaplama
â”‚   â”œâ”€â”€ pattern-engine.js        # Pattern oluÅŸturma
â”‚   â””â”€â”€ telegram-bot.js          # Bot logic
â”‚
â””â”€â”€ database/
    â”œâ”€â”€ licenses/                # Lisans verileri
    â”œâ”€â”€ usage/                   # Token kullanÄ±mlarÄ±
    â”œâ”€â”€ corrections/             # DÃ¼zeltme kayÄ±tlarÄ±
    â””â”€â”€ patterns/                # OluÅŸan pattern'lar
```

---

## ğŸ”„ Veri AkÄ±ÅŸÄ± DiyagramÄ±

### A. Belge Ä°ÅŸleme AkÄ±ÅŸÄ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dosya   â”‚â”€â”€â”€â”€â–ºâ”‚ InboxWatcherâ”‚â”€â”€â”€â”€â–ºâ”‚ OfflineQueueâ”‚â”€â”€â”€â”€â–ºâ”‚ BackendClnt â”‚
â”‚ BÄ±rakÄ±r â”‚     â”‚ (algÄ±lama)  â”‚     â”‚ (kuyruk)    â”‚     â”‚ (API call)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                               â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DOMIZAN BACKEND                             â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ License      â”‚    â”‚ Token        â”‚    â”‚ Pattern      â”‚          â”‚
â”‚  â”‚ Validation   â”‚â”€â”€â”€â–ºâ”‚ Check        â”‚â”€â”€â”€â–ºâ”‚ Match        â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                   â”‚                   â”‚                   â”‚
â”‚         â–¼                   â–¼                   â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    GEMINI API CALL                            â”‚  â”‚
â”‚  â”‚  â€¢ ÅemasÄ±z analiz prompt                                      â”‚  â”‚
â”‚  â”‚  â€¢ Pattern hint ekleme (varsa)                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                                                           â”‚
â”‚         â–¼                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚ Token Log    â”‚    â”‚ Response     â”‚                              â”‚
â”‚  â”‚ (kayÄ±t)      â”‚    â”‚ (sonuÃ§)      â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                             â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DESKTOP APP                                 â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ DocumentFlow â”‚â”€â”€â”€â–ºâ”‚ MatchMukelf  â”‚â”€â”€â”€â–ºâ”‚ ShowPopup    â”‚          â”‚
â”‚  â”‚ (parse resp) â”‚    â”‚ (DB lookup)  â”‚    â”‚ (UI gÃ¶ster)  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                 â”‚                   â”‚
â”‚                                                 â–¼                   â”‚
â”‚                                          [KULLANICI]                â”‚
â”‚                                          Onay/DÃ¼zeltme              â”‚
â”‚                                                 â”‚                   â”‚
â”‚                                                 â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ SaveCorrect  â”‚â—„â”€â”€â”€â”‚ FileRouter   â”‚â—„â”€â”€â”€â”‚ ApplyEnrich  â”‚          â”‚
â”‚  â”‚ (backend'e)  â”‚    â”‚ (taÅŸÄ±)       â”‚    â”‚ (DB update)  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š SÄ±ralÄ± EtkileÅŸim DiyagramÄ± (Sequence)

```
KullanÄ±cÄ±     Desktop        Backend        Gemini        DB
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚  Dosya bÄ±rak             â”‚              â”‚           â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚ AlgÄ±la (chokidar)           â”‚           â”‚
    â”‚            â”‚â”€â”€â”€â”€â”€â”€â”      â”‚              â”‚           â”‚
    â”‚            â”‚â—„â”€â”€â”€â”€â”€â”˜      â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚ Ä°Ã§erik Ã§Ä±kar (pdf-parse)    â”‚           â”‚
    â”‚            â”‚â”€â”€â”€â”€â”€â”€â”      â”‚              â”‚           â”‚
    â”‚            â”‚â—„â”€â”€â”€â”€â”€â”˜      â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚ POST /ai/analyze            â”‚           â”‚
    â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚           â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚ Lisans kontrol           â”‚
    â”‚            â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚            â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚ Token kontrol            â”‚
    â”‚            â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚            â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚ Pattern ara  â”‚           â”‚
    â”‚            â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚            â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚ Gemini Ã§aÄŸrÄ± â”‚           â”‚
    â”‚            â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
    â”‚            â”‚              â”‚    Analiz    â”‚           â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚ Token log    â”‚           â”‚
    â”‚            â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚           â”‚
    â”‚            â”‚   SonuÃ§      â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚ MÃ¼kellef match              â”‚           â”‚
    â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
    â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚           â”‚
    â”‚   POPUP    â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚ DÃ¼zelt     â”‚              â”‚              â”‚           â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚ POST /learning/correction   â”‚           â”‚
    â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚           â”‚
    â”‚            â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚            â”‚ Dosya taÅŸÄ±   â”‚              â”‚           â”‚
    â”‚            â”‚â”€â”€â”€â”€â”€â”€â”      â”‚              â”‚           â”‚
    â”‚            â”‚â—„â”€â”€â”€â”€â”€â”˜      â”‚              â”‚           â”‚
    â”‚            â”‚              â”‚              â”‚           â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚           â”‚
    â”‚  BaÅŸarÄ±lÄ±  â”‚              â”‚              â”‚           â”‚
```

---

## ğŸ”Œ BaÄŸlantÄ± NoktalarÄ±

| Kaynak | Hedef | Protokol | Port | AÃ§Ä±klama |
|--------|-------|----------|------|----------|
| Desktop | Backend | HTTPS | 443 | API Ã§aÄŸrÄ±larÄ± |
| Backend | Gemini | HTTPS | 443 | AI analiz |
| Backend | Telegram | HTTPS | 443 | Bot webhook |
| Desktop | PaylaÅŸÄ±mlÄ± KlasÃ¶r | SMB | 445 | Dosya izleme |
| Desktop | Lokal DB | File | - | SQLite/JSON |

---

## ğŸ’¾ Veri Depolama

### Desktop (Lokal)

```
%APPDATA%/domizan-desktop/
â”œâ”€â”€ license.dat              # ÅifrelenmiÅŸ lisans
â”œâ”€â”€ config.json              # KullanÄ±cÄ± ayarlarÄ±
â”œâ”€â”€ json-db/                 # MÃ¼kellef veritabanÄ±
â”‚   â””â”€â”€ mukellefler.json
â”œâ”€â”€ routing-log.json         # TaÅŸÄ±ma loglarÄ±
â”œâ”€â”€ offline-queue.json       # Bekleyen iÅŸlemler
â””â”€â”€ pattern-cache.json       # Lokal pattern cache
```

### Backend (Sunucu)

```
/var/lib/domizan/
â”œâ”€â”€ licenses/                # Lisans bilgileri
â”‚   â””â”€â”€ {license_id}.json
â”œâ”€â”€ usage/                   # Token kullanÄ±mlarÄ±
â”‚   â””â”€â”€ {YYYY-MM}/
â”‚       â””â”€â”€ {license_id}.jsonl
â”œâ”€â”€ corrections/             # DÃ¼zeltme kayÄ±tlarÄ±
â”‚   â””â”€â”€ {document_type}/
â”‚       â””â”€â”€ corrections.jsonl
â””â”€â”€ patterns/                # Ã–ÄŸrenilmiÅŸ pattern'lar
    â””â”€â”€ patterns.json
```
